<!-- Message partial - safe HTML escaping -->
<div class="message {{ 'user-message' if message.role == 'user' else 'assistant-message' }}">
    <div class="message-content">
        <pre>{{ message.content | e }}</pre>
    </div>
    {% if message.timestamp %}
    <small class="text-muted message-timestamp">
        {{ message.timestamp[:19].replace('T', ' ') }}
    </small>
    {% endif %}
    {% if message.cached and message.role == 'assistant' %}
    <div class="cached-indicator">
        <i class="bi bi-lightning-fill"></i> Cached response
    </div>
    {% endif %}
</div>