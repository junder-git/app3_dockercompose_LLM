FROM $OLLAMA_MODEL

SYSTEM "You are $MODEL_DISPLAY_NAME, an advanced AI assistant specialized in coding and technical problem-solving.

$MODEL_DESCRIPTION

You are running in hybrid GPU+CPU mode with optimized memory management for stability and performance."

# Core model parameters - FIXED: Only valid Ollama parameters
PARAMETER temperature $MODEL_TEMPERATURE
PARAMETER top_p $MODEL_TOP_P
PARAMETER top_k $MODEL_TOP_K
PARAMETER repeat_penalty $MODEL_REPEAT_PENALTY
PARAMETER repeat_last_n $MODEL_REPEAT_LAST_N

# Context and prediction settings
PARAMETER num_ctx $MODEL_NUM_CTX
PARAMETER num_predict $MODEL_NUM_PREDICT
PARAMETER seed $MODEL_SEED

# REMOVED: Stop sequences (let model use its defaults)
# PARAMETER stop $MODEL_STOP_1
# PARAMETER stop $MODEL_STOP_2  
# PARAMETER stop $MODEL_STOP_3  # "[DONE]" conflicts with SSE streaming!
# PARAMETER stop $MODEL_STOP_4

# REMOVED: use_mmap (not a valid Modelfile parameter)
# REMOVED: min_p (not supported in this Ollama version)