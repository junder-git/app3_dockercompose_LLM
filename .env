# CLEAN .env - Optimized Configuration
# =============================================================================

# üîê JWT CONFIGURATION
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars

# Domain Configuration
ALLOWED_DOMAINS=localhost,127.0.0.1,ai.junder.uk

# Admin User Configuration
ADMIN_USERNAME=admin1
ADMIN_PASSWORD=admin1
ADMIN_USER_ID=admin

# =============================================================================
# ü§ñ MODEL CONFIGURATION
# =============================================================================
OLLAMA_VERSION=0.9.6
OLLAMA_MODEL=devstral
MODEL_DISPLAY_NAME=Devstral Small 2505
MODEL_DESCRIPTION=Advanced coding and reasoning model optimized for hybrid GPU+CPU processing

# =============================================================================
# ‚ö° OLLAMA SERVER SETTINGS
# =============================================================================
OLLAMA_HOST=0.0.0.0
OLLAMA_URL=http://ollama:11434
OLLAMA_LOAD_TIMEOUT=45m

# Memory settings
OLLAMA_MMAP=false                            # Server: DISABLED
OLLAMA_MLOCK=true                            # Server: ENABLED

# Hybrid GPU+CPU settings
OLLAMA_GPU_LAYERS=41                     # GPU layers
OLLAMA_CONTEXT_SIZE=512                 # Context window (default: 4096)
OLLAMA_BATCH_SIZE=128                    # Batch size
OLLAMA_NUM_THREAD=4                      # CPU threads

# Resource management
OLLAMA_KEEP_ALIVE=99999h                    # Keep models loaded for 24 hours
OLLAMA_NOPRUNE=0                         # Allow pruning
OLLAMA_MAX_LOADED_MODELS=1               # Single model

# GPU settings
NVIDIA_VISIBLE_DEVICES=0                 # Use GPU 0

# =============================================================================
# üéõÔ∏è MODEL PARAMETERS - BASED ON OFFICIAL OLLAMA DOCUMENTATION
# =============================================================================

# Core model parameters (using documentation defaults)
MODEL_TEMPERATURE=0.8                    # Default: 0.8
MODEL_TOP_P=0.9                         # Default: 0.9  
MODEL_TOP_K=40                          # Default: 40
MODEL_MIN_P=0.0                         # Default: 0.0 (disabled)
MODEL_REPEAT_PENALTY=1.1                # Default: 1.1
MODEL_REPEAT_LAST_N=64                  # Default: 64

# Context and prediction settings (using documentation defaults)
MODEL_NUM_CTX=1024                      # Default: 4096
MODEL_NUM_PREDICT=-1                    # Default: -1 (infinite)
MODEL_SEED=0                            # Default: 0

# Stop sequences (multiple stops supported)
MODEL_STOP_1="<|endoftext|>"           # Stop sequence 1
MODEL_STOP_2="<|im_end|>"              # Stop sequence 2  
MODEL_STOP_3="[DONE]"                  # Stop sequence 3
MODEL_STOP_4="<|end|>"                 # Stop sequence 4

# Removed: keep_alive (handled at server level via OLLAMA_KEEP_ALIVE)
# Removed: Mirostat parameters (deprecated)
# Removed: use_mlock (deprecated)
# Removed: GPU/threading params (handled at server level)

# =============================================================================
# üì± APPLICATION SETTINGS
# =============================================================================
RATE_LIMIT_MESSAGES_PER_MINUTE=8         # Enhanced rate limit
MAX_MESSAGE_LENGTH=10000                 # Larger messages

# User Management
MAX_CHATS_PER_USER=1
MAX_PENDING_USERS=2
MIN_USERNAME_LENGTH=3
MAX_USERNAME_LENGTH=12
MIN_PASSWORD_LENGTH=6
MAX_PASSWORD_LENGTH=16

# =============================================================================
# üê≥ DOCKER RESOURCES
# =============================================================================
OLLAMA_MEMORY=16G
OLLAMA_CPU=4                             # CPU allocation
REDIS_MEMORY=1G
REDIS_CPU=1
NGINX_MEMORY=1G
NGINX_CPU=1

# =============================================================================
# üì¶ REDIS & NETWORK
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379/0

# =============================================================================
# üìù LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json