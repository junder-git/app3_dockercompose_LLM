# CLEAN .env - Optimized Configuration
# =============================================================================

# üîê JWT CONFIGURATION
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars

# Domain Configuration
ALLOWED_DOMAINS=localhost,127.0.0.1,ai.junder.uk

# Admin User Configuration
ADMIN_USERNAME=admin1
ADMIN_PASSWORD=admin1
ADMIN_USER_ID=admin

# =============================================================================
# ü§ñ MODEL CONFIGURATION
# =============================================================================
OLLAMA_VERSION=0.9.6
OLLAMA_MODEL=devstral
MODEL_DISPLAY_NAME=Devstral Small 2505
MODEL_DESCRIPTION=Advanced coding and reasoning model optimized for hybrid GPU+CPU processing

# =============================================================================
# ‚ö° OLLAMA SERVER SETTINGS
# =============================================================================
OLLAMA_HOST=0.0.0.0
OLLAMA_URL=http://ollama:11434
OLLAMA_LOAD_TIMEOUT=45m

# Memory settings
OLLAMA_MMAP=0                            # Server: DISABLED
OLLAMA_MLOCK=1                           # Server: ENABLED

# Hybrid GPU+CPU settings
OLLAMA_GPU_LAYERS=12                     # GPU layers
OLLAMA_CONTEXT_SIZE=512                  # Context window
OLLAMA_BATCH_SIZE=512                    # Batch size
OLLAMA_NUM_THREAD=8                      # CPU threads

# Resource management
OLLAMA_KEEP_ALIVE=24h                    # Keep models loaded for 24 hours
OLLAMA_NOPRUNE=0                         # Allow pruning
OLLAMA_MAX_LOADED_MODELS=1               # Single model

# GPU settings
NVIDIA_VISIBLE_DEVICES=0                 # Use GPU 0

# =============================================================================
# üéõÔ∏è MODEL PARAMETERS - BASED ON OFFICIAL OLLAMA DOCUMENTATION
# =============================================================================

# Core model parameters
MODEL_TEMPERATURE=0.7                    # Creativity level (0.0-2.0, default: 0.8)
MODEL_TOP_P=0.9                         # Nucleus sampling (0.0-1.0, default: 0.9)  
MODEL_TOP_K=40                          # Top-k sampling (1-100, default: 40)
MODEL_MIN_P=0.05                        # Minimum probability threshold (0.0-1.0, default: 0.0)
MODEL_REPEAT_PENALTY=1.1                # Repetition penalty (0.0-2.0, default: 1.1)
MODEL_REPEAT_LAST_N=64                  # Lookback for repetition (int, default: 64)

# Context and prediction settings
MODEL_NUM_CTX=512                       # Context window size (int, default: 4096)
MODEL_NUM_PREDICT=128                   # Max tokens to predict (int, default: -1 unlimited)
MODEL_SEED=42                           # Random seed for reproducibility (int, default: 0)

# Stop sequences (multiple stops supported)
MODEL_STOP_1="<|endoftext|>"           # Stop sequence 1
MODEL_STOP_2="<|im_end|>"              # Stop sequence 2  
MODEL_STOP_3="[DONE]"                  # Stop sequence 3
MODEL_STOP_4="<|end|>"                 # Stop sequence 4

# Removed: keep_alive (handled at server level via OLLAMA_KEEP_ALIVE)
# Removed: Mirostat parameters (deprecated)
# Removed: use_mlock (deprecated)
# Removed: GPU/threading params (handled at server level)

# =============================================================================
# üì± APPLICATION SETTINGS
# =============================================================================
RATE_LIMIT_MESSAGES_PER_MINUTE=8         # Enhanced rate limit
MAX_MESSAGE_LENGTH=10000                 # Larger messages

# User Management
MAX_CHATS_PER_USER=1
MAX_PENDING_USERS=2
MIN_USERNAME_LENGTH=3
MAX_USERNAME_LENGTH=12
MIN_PASSWORD_LENGTH=6
MAX_PASSWORD_LENGTH=16

# =============================================================================
# üê≥ DOCKER RESOURCES
# =============================================================================
OLLAMA_MEMORY=16G
OLLAMA_CPU=4                             # CPU allocation
REDIS_MEMORY=1G
REDIS_CPU=1
NGINX_MEMORY=1G
NGINX_CPU=1

# =============================================================================
# üì¶ REDIS & NETWORK
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379/0

# =============================================================================
# üìù LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json