<!-- chat.html - UPDATED: Linear chat layout with code panel -->
<div class="chat-main-layout">
    <!-- Main Chat Container -->
    <div class="chat-container">
        <div class="chat-messages" id="chat-messages">
            <!-- Feature alerts inside scrolling area at the top -->
            {{ chat_features }}
            
            <!-- Wrapper for actual message content -->
            <div class="chat-messages-content" id="chat-messages-content">
                <div id="welcome-prompt" class="welcome-prompt">
                    <h4><i class="bi bi-chat-dots"></i> Welcome to ai.junder.uk</h4>
                    <p>Start a conversation with our AI assistant. Ask questions about coding, technology, or anything else!</p>
                    <div class="text-muted">
                        <small>ðŸ’¡ Tip: Use <kbd>Enter</kbd> to send, <kbd>Shift+Enter</kbd> for new lines</small>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <form id="chat-form" class="chat-input-form">
                <textarea 
                    class="form-control chat-input" 
                    id="chat-input" 
                    placeholder="{{ chat_placeholder }}" 
                    rows="1"
                    required
                    style="resize: none; overflow: hidden;"></textarea>
                
                <button type="submit" class="btn btn-primary btn-send" id="send-button">
                    <i class="bi bi-send"></i>
                </button>
                
                <button type="button" class="btn btn-danger btn-send" id="stop-button" style="display: none;">
                    <i class="bi bi-stop"></i>
                </button>
            </form>
            
            <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="text-muted">
                    <small>
                        <span id="char-count">0</span> characters
                        <span class="mx-2">â€¢</span>
                        <span id="message-count">0</span> messages
                    </small>
                </div>
                <div>
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="clear-chat">
                        <i class="bi bi-trash"></i> Clear
                    </button>
                </div>
            </div>
        </div>
    </div>
    
<!-- Load syntax highlighting library -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<!-- Load JavaScript modules in correct dependency order -->
{{ js_shared }}
{{ js_sse }}
{{ js_code }}
{{ js_chat }}
{{ js_user }}