<!-- index.html - Index page content -->
<div class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">ai.junder.uk</h1>
        <p class="hero-subtitle">
            Advanced coding model, powered by Devstral.<br>
            Transform your ideas into code. <br> <br>
            {{ start_chat_button }} <br>
            <small class="text-muted">
                <i class="bi bi-info-circle"></i> 
                No login: 10 messages, 10 minutes
            </small>
        </p>
    </div>
</div>

<script>
// Neural network animation with gradient background
(function() {
    'use strict';
    
    // Create canvas element
    const canvas = document.createElement('canvas');
    canvas.id = 'bg-canvas';
    canvas.style.cssText = `
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        z-index: 1 !important;
        pointer-events: none !important;
        opacity: 1 !important;
    `;
    
    // Insert canvas as first child of body (behind everything)
    document.body.insertBefore(canvas, document.body.firstChild);
    
    console.log('âœ… Canvas created and inserted into DOM');
    
    const ctx = canvas.getContext('2d');
    let points = [];
    let animationFrameId;
    let backgroundGradient;
    
    function createBackgroundGradient() {
        // Create a subtle blue gradient background
        backgroundGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
        backgroundGradient.addColorStop(0, 'rgba(13, 20, 33, 0.95)');      // Dark blue-gray
        backgroundGradient.addColorStop(0.3, 'rgba(26, 35, 50, 0.85)');    // Medium blue-gray
        backgroundGradient.addColorStop(0.7, 'rgba(13, 20, 33, 0.90)');    // Back to dark
        backgroundGradient.addColorStop(1, 'rgba(8, 12, 20, 0.98)');       // Very dark blue
    }
    
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        createBackgroundGradient(); // Recreate gradient for new canvas size
        createPoints();
        console.log(`ðŸ”„ Canvas resized to ${canvas.width}x${canvas.height}`);
    }
    
    function createPoints() {
        points = [];
        const density = Math.min(80, Math.floor((canvas.width * canvas.height) / 20000));
        
        console.log(`ðŸŽ¯ Creating ${density} neural network points`);
        
        for (let i = 0; i < density; i++) {
            points.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 0.3,
                vy: (Math.random() - 0.5) * 0.3
            });
        }
    }

    function animate() {
        // Clear canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Draw gradient background
        ctx.fillStyle = backgroundGradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Update and draw points
        for (let i = 0; i < points.length; i++) {
            let p = points[i];
            p.x += p.vx;
            p.y += p.vy;

            // Bounce off walls
            if (p.x < 0 || p.x > canvas.width) p.vx = -p.vx;
            if (p.y < 0 || p.y > canvas.height) p.vy = -p.vy;

            // Keep points in bounds
            p.x = Math.max(0, Math.min(canvas.width, p.x));
            p.y = Math.max(0, Math.min(canvas.height, p.y));

            // Draw point with subtle glow
            ctx.beginPath();
            ctx.arc(p.x, p.y, 1.5, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(0, 200, 255, 0.9)';
            ctx.fill();
            
            // Add subtle glow effect
            ctx.beginPath();
            ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(0, 200, 255, 0.1)';
            ctx.fill();
        }

        // Draw connections
        for (let i = 0; i < points.length; i++) {
            for (let j = i + 1; j < points.length; j++) {
                let dx = points[i].x - points[j].x;
                let dy = points[i].y - points[j].y;
                let dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < 150) {
                    let opacity = 0.5 * (1 - dist / 150);
                    ctx.beginPath();
                    ctx.moveTo(points[i].x, points[i].y);
                    ctx.lineTo(points[j].x, points[j].y);
                    ctx.strokeStyle = `rgba(0, 200, 255, ${opacity})`;
                    ctx.lineWidth = 0.8;
                    ctx.stroke();
                }
            }
        }

        animationFrameId = requestAnimationFrame(animate);
    }

    // Initialize
    window.addEventListener('resize', resizeCanvas);
    
    // Start immediately when script runs
    resizeCanvas();
    animate();
    
    // Add loaded class for CSS animations
    document.body.classList.add('canvas-loaded');
    console.log('âœ¨ Neural network animation with gradient background started successfully');
    
    // Cleanup on page unload
    window.addEventListener('beforeunload', () => {
        if (animationFrameId) {
            cancelAnimationFrame(animationFrameId);
        }
        window.removeEventListener('resize', resizeCanvas);
        if (canvas.parentNode) {
            canvas.parentNode.removeChild(canvas);
        }
        console.log('ðŸ§¹ Neural network animation cleaned up');
    });
})();
</script>